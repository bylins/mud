# Trigger #4020
vnum: 4020
name: Сказитель рассказывает сказки
attach_type: kMobTrigger
trigger_types:
- kSpeech
narg: 3
arglist: расскажи сказку
script: "wait 1\r\nif (%actor.vnum% != -1)\r\n  halt\r\nend\r\nif !%actor.rentable%\r\n  хмур\r\n  say Не дело от боя бегать... Приходи-ка потом.\r\n  halt\r\nend\r\ncontext 4000\r\nmsend %actor% Сказитель внимательно посмотрел на Вас.\r\nmechoaround %actor% Сказитель внимательно посмотрел на %actor.vname%.\r\nwait 1s\r\nswitch %actor.class%\r\n  case 3\r\n    if %actor.quested(12200)%\r\n      say Тебе я уже рассказывал сказку, надо и другим оставить.\r\n      хих\r\n      halt\r\n    end\r\n    if (%fighterstory% == 1)\r\n      wait 1s\r\n      say Устал я... Передохну малость.\r\n      say Подходи через денек - утро вечера мудренее..\r\n      halt\r\n    end\r\n    say Сказку... Ну что же, слушай.\r\n    say То ли было, то ли не было, толь недавно, толь давнёшенько...\r\n    msend %actor% Вы заслушались сказочника и ваши мысли сами собой побежали за его словами.\r\n    mechoaround %actor% Странный туман скрыл %actor.vname% и сказочника.\r\n    mteleport %actor% 12200\r\n    set fighterstory 1\r\n    worlds fighterstory\r\n    halt\r\n  break\r\n  case 7\r\n    if %actor.quested(12800)%\r\n      say Тебе я уже рассказывал сказку, надо и другим оставить.\r\n      хих\r\n      halt\r\n    end\r\n    if (%defendermagestory% == 1)\r\n      wait 1s\r\n      say Устал я... Передохну малость.\r\n      say Подходи через денек - утро вечера мудренее..\r\n      halt\r\n    end\r\n    say Сказку... Ну что же, слушай.\r\n    say За лесами, за полями, да за синими морями...\r\n    msend %actor% Вы заслушались сказочника и ваши мысли сами собой побежали за его словами.\r\n    mechoaround %actor% Странный туман скрыл %actor.vname% и сказочника.\r\n    mteleport %actor% 12800\r\n    set defendermagestory 1\r\n    worlds defendermagestory\r\n    halt\r\n  break\r\n  case 13\r\n    if %actor.quested(12900)%\r\n      say Тебе я уже рассказывал сказку, надо и другим оставить.\r\n      хих\r\n      halt\r\n    end\r\n    if (%druidstory% == 1)\r\n      wait 1s\r\n      say Устал я... Передохну малость.\r\n      say Подходи через денек - утро вечера мудренее.\r\n      halt\r\n    end\r\n    say Сказку... Ну что же, слушай.\r\n    say Во времена стародавние, в лета былинные...\r\n    msend %actor% Вы заслушались сказочника и ваши мысли сами собой побежали за его словами.\r\n    mechoaround %actor% Странный туман скрыл %actor.vname% и сказочника.\r\n    mteleport %actor% 12900\r\n    set druidstory 1\r\n    worlds druidstory\r\n    halt\r\n  break\r\ndone\r\nsay Извини, для тебя у меня нет сказки...\r\nвзд"
