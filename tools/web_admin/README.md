# Bylins MUD Web Admin Interface

–í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∏—è –º–∏—Ä–∞ –ë—ã–ª–∏–Ω —á–µ—Ä–µ–∑ Admin API.

## –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- üó∫Ô∏è **–ó–æ–Ω—ã**: –ø—Ä–æ—Å–º–æ—Ç—Ä, —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
- üëπ **–ú–æ–±—ã**: —Å–ø–∏—Å–æ–∫, –ø—Ä–æ—Å–º–æ—Ç—Ä, —Å–æ–∑–¥–∞–Ω–∏–µ, —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
- ‚öîÔ∏è **–ü—Ä–µ–¥–º–µ—Ç—ã**: —Å–ø–∏—Å–æ–∫, –ø—Ä–æ—Å–º–æ—Ç—Ä, —Å–æ–∑–¥–∞–Ω–∏–µ, —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
- üèõÔ∏è **–ö–æ–º–Ω–∞—Ç—ã**: —Å–ø–∏—Å–æ–∫, –ø—Ä–æ—Å–º–æ—Ç—Ä, —Å–æ–∑–¥–∞–Ω–∏–µ, —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
- ‚ö° **–¢—Ä–∏–≥–≥–µ—Ä—ã**: —Å–ø–∏—Å–æ–∫, –ø—Ä–æ—Å–º–æ—Ç—Ä, —Å–æ–∑–¥–∞–Ω–∏–µ, —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

## –£—Å—Ç–∞–Ω–æ–≤–∫–∞

```bash
cd tools/web_admin
pip install -r requirements.txt
```

## –ó–∞–ø—É—Å–∫

**–í–ê–ñ–ù–û:** –ü–µ—Ä–µ–¥ –∑–∞–ø—É—Å–∫–æ–º Flask –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –∑–∞–¥–∞—Ç—å –ø—É—Ç—å –∫ —Å–æ–∫–µ—Ç—É —á–µ—Ä–µ–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é –æ–∫—Ä—É–∂–µ–Ω–∏—è `MUD_SOCKET`.

### –®–∞–≥ 1: –ó–∞–ø—É—Å—Ç–∏—Ç–µ MUD —Å–µ—Ä–≤–µ—Ä

```bash
cd build_debug
./circle -d ~/repos/world.yaml 4000
```

–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ Admin API –≤–∫–ª—é—á–µ–Ω –≤ `configuration.xml`:
```xml
<admin_api>
    <enabled>true</enabled>
    <socket_path>admin_api.sock</socket_path>
    <require_auth>true</require_auth>
</admin_api>
```

### –®–∞–≥ 2: –ó–∞–ø—É—Å—Ç–∏—Ç–µ Flask —Å —É–∫–∞–∑–∞–Ω–∏–µ–º –ø—É—Ç–∏ –∫ —Å–æ–∫–µ—Ç—É

```bash
cd tools/web_admin
MUD_SOCKET=~/repos/world.yaml/admin_api.sock python3 app.py
```

### –®–∞–≥ 3: –û—Ç–∫—Ä–æ–π—Ç–µ –±—Ä–∞—É–∑–µ—Ä

http://127.0.0.1:5000

## –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è –æ–∫—Ä—É–∂–µ–Ω–∏—è MUD_SOCKET (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–∞)

–£–∫–∞–∑—ã–≤–∞–µ—Ç –ø—É—Ç—å –∫ Unix socket Admin API:

```bash
# –î–ª—è YAML –º–∏—Ä–∞
export MUD_SOCKET=~/repos/world.yaml/admin_api.sock

# –î–ª—è —Ç–µ—Å—Ç–æ–≤–æ–≥–æ –º–∏—Ä–∞ small/
export MUD_SOCKET=~/repos/mud/build_debug/small/admin_api.sock

# –ó–∞–ø—É—Å–∫ Flask
python3 app.py
```

**–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:** –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è `MUD_SOCKET` –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–∞. Flask –Ω–µ –∑–∞–ø—É—Å—Ç–∏—Ç—Å—è –±–µ–∑ –Ω–µ—ë.

## –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

- Python 3.8+
- Flask 3.0.0
- –ó–∞–ø—É—â–µ–Ω–Ω—ã–π MUD —Å–µ—Ä–≤–µ—Ä —Å –≤–∫–ª—é—á–µ–Ω–Ω—ã–º Admin API

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞

```
web_admin/
‚îú‚îÄ‚îÄ app.py              # Flask –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
‚îú‚îÄ‚îÄ mud_client.py       # –ö–ª–∏–µ–Ω—Ç Admin API
‚îú‚îÄ‚îÄ requirements.txt    # Python –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
‚îú‚îÄ‚îÄ templates/          # HTML —à–∞–±–ª–æ–Ω—ã
‚îÇ   ‚îú‚îÄ‚îÄ base.html
‚îÇ   ‚îú‚îÄ‚îÄ index.html
‚îÇ   ‚îú‚îÄ‚îÄ zones_list.html
‚îÇ   ‚îî‚îÄ‚îÄ error.html
‚îî‚îÄ‚îÄ static/            # –°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ñ–∞–π–ª—ã
    ‚îî‚îÄ‚îÄ css/
        ‚îî‚îÄ‚îÄ style.css  # –°—Ç–∏–ª–∏ (—Ä–µ—Ç—Ä–æ 2000-—Ö)
```

## –°—Ç–∏–ª—å

–ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å –≤—ã–ø–æ–ª–Ω–µ–Ω –≤ —Ä–µ—Ç—Ä–æ-—Å—Ç–∏–ª–µ —Ä–∞–Ω–Ω–∏—Ö 2000-—Ö –≥–æ–¥–æ–≤ (–∫–∞–∫ –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–π —Å–∞–π—Ç –ë—ã–ª–∏–Ω):
- HTML —Ç–∞–±–ª–∏—Ü—ã –¥–ª—è –≤—ë—Ä—Å—Ç–∫–∏
- –¶–≤–µ—Ç–æ–≤–∞—è —Å—Ö–µ–º–∞: –∫–æ—Ä–∏—á–Ω–µ–≤—ã–π, –±–µ–∂–µ–≤—ã–π, –∑–æ–ª–æ—Ç–æ–π
- –ö–ª–∞—Å—Å–∏—á–µ—Å–∫–∏–µ —à—Ä–∏—Ñ—Ç—ã (Arial, Georgia)
- –ú–∏–Ω–∏–º—É–º JavaScript

## API

–í—Å–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è —á–µ—Ä–µ–∑ Admin API –ø–æ Unix socket:
- –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ `admin_api.sock`
- –ü—Ä–æ—Ç–æ–∫–æ–ª: JSON over newline-delimited stream
- –ö–æ–¥–∏—Ä–æ–≤–∫–∞: UTF-8 (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è –≤/–∏–∑ KOI8-R)

## –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

**–í–ê–ñ–ù–û:** –≠—Ç–æ—Ç –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω —Ç–æ–ª—å–∫–æ –¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è!

- –†–∞–±–æ—Ç–∞–µ—Ç —Ç–æ–ª—å–∫–æ –Ω–∞ 127.0.0.1
- –¢—Ä–µ–±—É–µ—Ç –¥–æ—Å—Ç—É–ø–∞ –∫ Unix socket (–ª–æ–∫–∞–ª—å–Ω–∞—è —Ñ–∞–π–ª–æ–≤–∞—è —Å–∏—Å—Ç–µ–º–∞)
- –ù–µ –∏–º–µ–µ—Ç –∑–∞—â–∏—Ç—ã –æ—Ç CSRF (—Ç–æ–ª—å–∫–æ –ª–æ–∫–∞–ª—å–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ)
- –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –æ—Ç–∫–ª—é—á–µ–Ω–∞ –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ (`require_auth=false`)

–î–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞:
1. –í–∫–ª—é—á–∏—Ç–µ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—é (`require_auth=true`)
2. –î–æ–±–∞–≤—å—Ç–µ SSL/TLS
3. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞ –∫ socket —Ñ–∞–π–ª—É
4. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ reverse proxy (nginx)
