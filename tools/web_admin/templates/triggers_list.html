{% extends "base.html" %}

{% block title %}Триггеры зоны {{ zone }} - Былины MUD{% endblock %}

{% block breadcrumbs %}
<div class="breadcrumbs-bar">
    <div class="max-w-[1280px] mx-auto px-6 py-2.5">
        <div class="flex items-center gap-2 font-inter text-sm text-ink-muted">
            <a href="{{ url_for('index') }}">Главная</a>
            <svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="color: #d4c49a;">
                <polyline points="9 18 15 12 9 6"/>
            </svg>
            <span class="text-ink-light">Триггеры</span>
        </div>
    </div>
</div>
{% endblock %}

{% block content %}

    <!-- Page Header -->
    <div class="page-header" style="align-items: flex-end;">
        <div>
            <h2 class="font-serif-display" style="font-size: 28px;">
                Триггеры зоны <span class="text-amber-700">{{ zone }}</span>
            </h2>
            <p class="page-subtitle">
                {% if triggers %}Найдено: {{ triggers|length }}{% else %}Триггеры не найдены{% endif %}
            </p>
        </div>

        <div class="zone-filter">
            <form method="GET" action="{{ url_for('triggers_list') }}" style="display: flex; align-items: center; gap: 10px;">
                <label class="font-inter text-sm text-ink-muted font-medium" for="zone-select">Зона:</label>
                <select id="zone-select" name="zone" onchange="this.form.submit()">
                    {% for z in range(0, 100) %}
                    <option value="{{ z }}" {{ 'selected' if z == zone|int }}>{{ z }}</option>
                    {% endfor %}
                </select>
            </form>
        </div>
    </div>

    {% if triggers %}
    <table>
        <thead>
            <tr>
                <th style="width: 100px;">Vnum</th>
                <th>Название</th>
            </tr>
        </thead>
        <tbody>
            {% for item in triggers %}
            <tr>
                <td>
                    <span class="vnum-badge">{{ item.vnum }}</span>
                </td>
                <td>
                    <span style="font-weight: 500;">{{ item.name|default('--') }}</span>
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
    {% else %}
    <div class="empty-state">
        <svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="#d4c49a" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" style="margin: 0 auto 16px;">
            <polygon points="13 2 3 14 12 14 11 22 21 10 12 10 13 2"/>
        </svg>
        <div class="font-serif-display text-lg text-ink-light" style="margin-bottom: 8px;">Триггеры не найдены</div>
        <div class="font-inter text-sm text-ink-muted">В зоне {{ zone }} нет триггеров. Попробуйте выбрать другую зону.</div>
    </div>
    {% endif %}

{% endblock %}
